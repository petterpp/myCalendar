<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">

    <f:view contentType="text/html" >
        <h:head>
            <f:facet name="first">
                <title>Mine Kalendar</title>
            </f:facet>
            <link type="text/css" rel="stylesheet" href="/project/faces/javax.faces.resource/theme.css?ln=primefaces-cupertino" />
            <link rel="stylesheet" type="text/css" href="../cupertino.css" />
            
        </h:head>
        
        <h:body>
            <h:form id="form">
            <p:growl id="messages" showDetail="true" /> 

            <p:layout fullPage="true">

                <p:layoutUnit position="north" size="100" resizable="true" closable="true" collapsible="true">
                    Mine Kalender
                </p:layoutUnit>

                <!--Left Panel-->
                <p:layoutUnit position="west" size="225" header="Left" collapsible="true" resizable="true">
                    <!--Calendar-->
                    <p:calendar value="#{CalendarBean.date1}" mode="inline" id="inlineCal"  style="display: block;" />
                    
                    <!--Task Tree-->
                    <h:form id="treeCategory">
                    <p:tree id="docTree" value="#{taskTree.root}" var="task" animate="true" 
                            dynamic="true" cache="false" selectionMode="single" selection="#{taskTree.selectedNode}">  
                        
                        <p:ajax event="expand" update=":form:messages" listener="#{taskTree.onNodeExpand}" />  
                        <p:ajax event="collapse" update=":form:messages" listener="#{taskTree.onNodeCollapse}" />  
                        <p:ajax event="select" update=":form:messages" listener="#{taskTree.onNodeSelect}" />  
                        <p:ajax event="unselect" update=":form:messages" listener="#{taskTree.onNodeUnselect}" />
        
                        <p:treeNode type="category">
                            <h:outputText value="#{task}"/>
                        </p:treeNode>

                        <p:treeNode type="project" icon="ui-icon-document">
                            <h:outputText value="#{task}" />  
                        </p:treeNode>  

                        <p:treeNode type="task" icon="ui-icon-image">  
                            <h:outputText value="#{task}" />  
                        </p:treeNode>

                        <p:treeNode type="new">
                            <p:commandButton value="#{task}" ajax="true" 
                                             action="#{taskTree.regNewCategory}"
                                             onclick="#{taskTree.showDlg()}" />
                        </p:treeNode>
                        
                    </p:tree>
                    </h:form>
                    
                </p:layoutUnit>

                <p:layoutUnit position="center" resizable="true" >
                    
                    <ui:include src="/pages/schedule.xhtml" />

                </p:layoutUnit>

            </p:layout>
            
            <!--Register New Item Dialog-->
            <p:dialog header="#{taskTree.dlgHeader}" widgetVar="dlg" resizable="false" rendered="true">  

                <h:panelGrid columns="2" style="margin-bottom:10px">  
                    <h:outputLabel for="name" value="Category Name:" />  
                    <p:inputText id="regName" value="#{taskTree.regName}" required="true"/>  
                </h:panelGrid>  

                <p:commandButton id="submitButton" value="Submit" type="submit" action="#{taskTree.submitAction}"
                                 update="treeCategory" onsuccess="#{taskTree.submitConfirm()}"/>  

            </p:dialog>
            
            <!--Confirm Dialog-->
            <p:confirmDialog id="confirmDialog" message="Please select a category."  
                header="Confirm Dialog" severity="alert" widgetVar="confirmation">  
                  
                <p:commandButton id="decline" value="Ok" onclick="confirmation.hide()" type="button" />   

            </p:confirmDialog> 
            
            </h:form>
        </h:body>

    </f:view>
</html>

